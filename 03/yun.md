# 3장 액션과 계산, 데이터의 차이를 알기

- 액션 : 실행 시점과 횟수에 의존
  ⇒ 부수효과가 있는 함수
- 계산 : 입력으로 출력을 계산
  ⇒ 순수 함수, 수학 함수
  ⇒ 참조 투명
  ⇒ 액션보다 테스트하기 쉬움
- 데이터 : 이벤트에 대한 사실

---

### 액션, 계산, 데이터를 구분할 시 이점

- 문제에 대해 생각할 때
  ⇒ 특별히 주의해야 할 부분(액션)과 데이터를 처리해야 할 부분, 결정을 내려야 하는 부분(계산)을 명확히 알 수 있음
- 코딩할 때
  ⇒ 최대한 액션에서 계산을 빼내야 함
  ⇒ 액션은 계산이 될 수 있는지, 계산은 데이터가 될 수 있는지 고려
- 코드를 읽을 때
  ⇒ 액션, 계산, 데이터 중 어떤 것에 속하는지 확인
  ⇒ 액션은 시간에 의존하기 때문에 조심

### 액션, 계산, 데이터 적용 특징

1. 액션, 계산, 데이터는 어디에나 적용할 수 있음
2. 액션 안에는 계산, 데이터, 또 다른 액션이 숨어 있을지도 모름
3. 계산은 더 작은 계산과 데이터로 나누고 연결할 수 있음
4. 데이터는 데이터만 조합 가능
   ⇒ 데이터를 찾는 일을 먼저 해야 함
   ⇒ 데이터를 찾으면 동작에 대해 많은 것을 알 수 있음
5. 계산은 때로 ‘우리 머리속에서’ 일어남
   ⇒ 계산은 우리 사고 과정에 녹아 있음

<aside>
💡 일반적인 구현 순서
1. 데이터
2. 계산
3. 액션

</aside>

### 계속 나누다 보면 점점 복잡해진다고 생각 할 수 있음

⇒ 하지만 액션에 숨어 있는 다른 액션이나 계산 또는 데이터를 발견하기 위해 나눌 수 있는 만큼 나누는 것이 좋음

---

## 데이터

- 데이터는 이벤트에 대한 사실
- 자바스크립트에서는 숫자, 문자, 배열, 객체로 구현.
  하스켈은 새로운 데이터 타입을 정의해 도메인을 표현
- 데이터 구조로 도메인을 표현
- 데이터를 언제나 수비게 해석할 수 있또록 표현하는 것이 함수형 프로그램에서 중요함!!

<aside>
💡 불변성
1. copy-on-write : 변경할 때 복사본을 만듦
2. defensive copy : 보관하려고 하는 데이터의 복사본을 만듦

</aside>

### 데이터 장점

- 데이터는 데이터 자체로 할 수 있는 것이 없기 때문에 좋음
  ⇒ 데이터 그대로 이해할 수 있음
- 직렬화
  ⇒ 직렬화된 데이터는 전송하거나 디스크에 저장했다가 읽기 쉬움
  (cf. 직렬화된 액션과 계산은 다른 곳에서 잘 동작할 것이라는 보장을 할 수 없음)
- 동일성 비교
  ⇒ 비교하기 쉬움
  (cf. 액션이나 계산은 비교하기 어려움)
- 자유로운 해석
  ⇒ 접속 로그는 문제 해결을 위해 사용할 수 있지만, 모니터링을 위해 사용할 수도 있음

### 데이터 단점

- 해석이 반드시 필요함

---

## 계산

- 계산은 입력값으로 출력값을 만드는 것
  ⇒ 실행 시점과 횟수에 관계없이 항상 같은 입력값에 대해 같은 출력값을 돌려줌
- 함수로 구현
- 함수형 프로그래머는 액션보다 계산을 선호
- 계산은 읽기 쉽고 무엇을 하는지 이해하기도 쉬움
- 순수 함수, 수학 함수

### 계산 구현 시 신경 안써도 되는 것들

1. 동시 실행 유무
2. 실행 횟수
3. 실행 시점

### 계산 장점

- 테스트하기 쉬움
- 기계적인 분석 쉬움 (ex. 정적 분석)
- 조합하기 좋음
  ⇒ 일급 계산을 사용

### 계산 단점

- 계산과 액션은 실행하기 전에 어떤 일이 발생할 지 알 수 없음
- 소프트웨어 측면에서 블랙박스
  ⇒ 이런 단점이 싫은 경우 데이터를 사용해야 함

<aside>
💡 함수형 프로그래밍의 대부분은 계산을 가지고 함. 계산은 일반적으로 함수형 프로그래밍 외부에 있는 액션을 통해 수행됨

</aside>

---

## 액션

- 액션은 외부 세계에 영향을 주거나 받는 것
  ⇒ 실행 시점과 횟수에 의존
  ⇒ 실행 순서와 반복 유무 확인!
- 함수로 구현
- 액션은 소프트웨어를 실행하려는 가장 중요한 이유임
  ⇒ 꼭 써야 함
- 부수 효과 함수

### 액션을 잘 사용하는 방법

- 가능한 액션을 적게 사용
- 액션은 가능한 작게 만듦
  ⇒ 액션에서 액션과 관련 없는 코드는 모두 제거
- 외부 세계와 상호작용하는 것을 제한
  ⇒ 내부에 계산과 데이터만 있고 가장 바깥쪽에 액션이 있는 구조가 이상적
- 액션이 호출 시점에 의존하는 것을 제한

---

### - 계산은 계획이나 결정을 할 때 적용

- 데이터는 계획하거나 결정한 결과
- 액션을 통해 계산으로 만든 계획을 실행
