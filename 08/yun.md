# 8장 계층형 설계1

### 소프트웨어 설계

- 코드를 만들고, 테스트하고, 유지보수하기 쉬운 프로그래밍 방법을 선택하기 위해 미적 감각을 사용하는 것

### 계층형 설계

- 소프트웨어를 계층으로 구성하는 기술
  ⇒ 각 계층에 있는 함수는 바로 아래 계층에 있는 함수를 이용해 정의
- 각 계층을 정확히 구분하기는 어려움
  ⇒ 계층을 잘 구분하려면 구분하기 위한 다양한 변수를 찾고 찾은 것을 가지고 어떻게 해야 하는지 알아야 함
- 어떤 계층에 코드를 추가하더라도 재사용하기 쉽고, 테스트하기 쉬우며, 고치기 쉬운 코드를 유지할 수 있어야 함

---

# 계층형 설계 패턴

### 패턴 1: 직접 구현

- 호출 그래프를 만들어 함수 호출을 시각화
  ⇒ 같은 박스를 가리킨다는 것은 같은 계층에 있어도 좋다는 정보
  ⇒ 모든 화살표가 같은 길이를 가져야 함!
- 직접 만든 함수와 언어 기능은 추상화 수준이 다름
  ⇒ 반복문과 배열 인덱스를 참조하는 기능은 더 낮은 추상화 단계
  ⇒ 한 함수에서 서로 다른 추상화 단계를 사용하면 코드가 명확하지 않아 읽기 어려움
- 직접 구현 패턴을 사용하면 비슷한 추상화 계층에 있는 함수를 호출
  ⇒ 너무 구체적이면 안됨

<aside>
💡 반복문이나 배열 인덱스 참조 기능은 언어에서 제공하는 기능

</aside>

### 같은 계층에 있는 함수는 같은 목적을 가져야 함

### 3단계 줌 레벨

1. 전역 줌 레벨 : 그래프 전체
2. 계층 줌 레벨 : 한 계층과 연결된 바로 아래 계층
3. 함수 줌 레벨 : 함수 하나와 바로 아래 연결된 함수들

### 직접 구현한 코드는 한 단계의 구체화 수준에 관한 문제만 해결

### 계층형 설계는 특정 구체화 단계에 집중할 수 있게 도와줌

### 호출 그래프는 구체화 단계에 대한 풍부한 단서를 보여줌

### 함수를 추출하면 더 일반적인 함수로 만들 수 있음

### 일반적인 함수가 많을수록 재사용하기 좋음

### 복잡성을 감추지 않음

⇒ 계층형 설계에서 모든 계층은 바로 아래 계층에 의존

---

### 패턴 2: 추상화 벽

- 인터페이스를 사용하여 코드를 만들면 높은 차원으로 구현 가능
- 고수준의 추상화 단계만 생각하면 됨

### 패턴 3: 작은 인터페이스

- 시스템이 커질수록 비즈니스 개념을 나타내는 중요한 인터페이스는 작고 강력한 동작으로 구성하는 것이 좋음
- 다른 동작도 직간접적으로 최소한의 인터페이스를 유지하면서 정의

### 패턴 4: 편리한 계층

- 계층형 설계 패턴과 실천 방법은 개발자의 요구를 만족시키면서 비즈니스 문제를 잘 풀 수 있어야 함
  ⇒ 소프트웨어를 더 빠르고 고품질을 제공하는 데 도움이 되는 계층에 시간 투자해야 함
  ⇒ 추상화 계층은 작업할 때 편리해야 함
